---
title: NVIDIA Isaac Sim Extensions (1)
author: Bruno Lee. J.
date: 2024-04-22 18:40:00 +0900
categories: [Simulation, Isaac Sim]
tags: [simulation, robotics]
pin: true
math: true
mermaid: true
---

## Isaac Sim Extension Introduction
오늘은 NVIDIA Isaac Sim뿐만 아니라, Omniverse 플랫폼 자체에서 제공하고 있는 **Extension**이라는 개념을 살펴보고 예제 코드를 통해 나만의 UI을 Isaac Sim에서 만들어 볼까 한다.

UI를 짜기 전에 우선 Extension이 무엇이고, Extension을 이용해 어떤 것들을 할 수 있는지 보자.

### What is Isaac Extension?
공식 문서에서 Omniverse Extensions는 [Omniverse Kit](https://docs.omniverse.nvidia.com/kit/docs/kit-manual/latest/guide/kit_overview.html) 기반 앱의 핵심 빌딩 블록이라고 한다. Omniverse Extensions는 [USD Explorer](https://docs.omniverse.nvidia.com/explorer/latest/index.html), [USD Composer](https://docs.omniverse.nvidia.com/composer/latest/index.html), [USD Presenter](https://docs.omniverse.nvidia.com/presenter/latest/index.html) 및 기타 앱에서 사용하는 개별 도구를 구성하는 것이다. Kit 기반 앱은 확장 기능으로 구성되어 있으므로 새로운 확장 기능을 생성하거나 기존 확장 기능을 편집 또는 활성화하여 필요에 맞게 사용하는 앱의 기능을 확장할 수 있다고 한다.

### Extension Category
Omniverse에는 작업 흐름을 사용자 정의하는 데 사용할 수 있는 다양한 확장 기능이 있다.
    
ex) [시뮬레이션](https://docs.omniverse.nvidia.com/extensions/latest/ext_simulation.html) 카테고리에는 물리부터 파괴 시뮬레이션까지 모든 것이 포함되어 있고, [애니메이션](https://docs.omniverse.nvidia.com/extensions/latest/ext_anim.html) 카테고리에는 캐릭터 애니메이션부터 타입라인 및 곡선 조작까지 모든 것이 포함되어 있다고 한다.

이 확장 목록은 아직은 완성이 되지 않았으며, [Kit developer documentation](https://docs.omniverse.nvidia.com/kit/docs/)에서 확인할 수 있다고 한다.

### Build your own Extensions
Document에서는 나만의 Extensions를 개발할 수 있도록 친절하게 [Extension 개발 가이드](https://docs.omniverse.nvidia.com/kit/docs/kit-manual/latest/guide/extensions_basic.html)도 지원하고 있다.

자 그럼 이제 나만의 Extension을 만들어보자. 어디서 보고 들은건 있어서 내가 최종적으로 만들고자 하는 프로토 타입을 살짝 그려보았다. 일단 기본적으로 나의 UI baseline은 [Omniverse Isaac Gym](https://github.com/NVIDIA-Omniverse/OmniIsaacGymEnvs/blob/main/docs/framework/extension_workflow.md)을 모티브로 만들려고 한다. 그런데 나만의 스타일을 곁들인... 그래서 나만의 1번째 UI의 최종 프로토타입은 아래와 같이 생겼다.

![ui1](https://github.com/brunoleej/brunoleej.github.io/blob/master/assets/img/isaac-sim/ui1.png?raw=true)

나는 강화학습 에이전트를 훈련시키려고 생각하고 있으며 내가 만든 프로토타입에 대해서 설명해주겠다.

1. `Information`: 이 UI에 대한 정보를 나타낸다. UI에 대한 설명이 들어갈 예정이다.

2. `Import Robot`: 로봇을 불러오는 UI이다. 내가 넣고 싶은 로봇의 경우 Clearpath사의 Husky 로봇, Wego Robotics의 WeCAR2.0, Franka Research 3, Franka Resarch 3 + Husky 로봇으로 총 4개이다.

3. 다음으로 `Number of Agents` 인자는 훈련을 수행하기 위해 몇명의 에이전트를 불러와서 학습을 수행할 것인지에 대해서 설정할 수 있는 UI이다. agent가 많으면 많을수록 학습은 빠르겠지만 그만큼 하드웨어의 성능이 받쳐주어야 학습이 가능할 것이다. 하드웨어가 좋지 않지만 agent 수를 최대로 한다면 컴퓨터가 빵...하고 터져버릴 수도 있다.

4. 다음으로 `LOAD` 버튼을 눌러 환경과 agent를 load할 수 있는 버튼이다.

5. `Rendering Mode`의 경우 Full render, headless가 있으며, Full render의 경우 학습과정을 우리 눈으로 볼 수 있도록 rendering 하는 것이고, headless의 경우 GUI (Graphic User Interface)를 띄우지 않고 CLI (Command Line Interface)를 통해 학습 과정을 확인할 수 있는 방법이다.

6. `Configure Training`의 경우 우리가 학습을 시키면 학습 모델 저장을 하게 될 것이다. 이러한 학습 모델 중간에 이어 학습을 재개하기 위해 resume from checkpoint라는 버튼을 만들어 놓았다. 그리고 학습에 대한 훈련이 된다면 test가 필요할 것인데, test를 할 수 있도록 버튼을 만들어 놓았다. 마지막으로, 훈련된 agent가 task를 잘 수행하는지 확인하기 위한 evaluate과정을 확인하려면 evaluate 버튼을 클릭하면 된다.

7. `Train/Test`의 경우, 훈련을 시작할 것인지 멈출것인지에 대한 내용이므로 설명이 필요하지 않으리라 생각이 되어 생략하겠다.

8. `Evaluation Setup` UI는 우리가 훈련을 완료하고 Evaluation을 수행할 때 필요한 UI이다.

9. `Import Environment`의 경우 환경, asset 등을 불러와서 배치할 수 있도록 만든 버튼이다.

10. `Translate, Orientation, Scale` 버튼은 X, Y, Z 축으로 위치를 옮기거나 크기를 변경할 수 있다.

11. `Reset Position`의 경우 asset들을 불러온 것을 초기화하고 싶은 경우 클릭할 수 있도록 만든 버튼이다.

12. 학습을 수행한 에이전트를 평가하려면 다양한 환경에서도 잘 할 수 있어야 한다. 예를 들어, 로봇이 navigation task를 수행하는 경우 정적 또는 동적의 장애물이 어느 위치, 방향으로 있던 task를 잘 수행해야한다. 그렇기 때문에 현재로써는 Gaussian, Uniform distribution을 기준으로 물체의 위치를 randomize할 수 있도록 만든 버튼이다.